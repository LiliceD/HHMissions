{% extends 'layout-center.html.twig' %}


{% block header_h2 %}
  Ajouter un utilisateur
{% endblock %}


{% block card_body %}
    {{ form_start(form) }}

        {{ form_row(form.email) }}
        {{ form_row(form.username) }}
        {{ form_row(form.name) }}
        {{ form_row(form.plainPassword.first) }}
        {{ form_row(form.plainPassword.second) }}
        {{ form_row(form.category) }}
{% endblock %}

{% block card_footer %}
        <div class="d-flex justify-content-end">
          <input type="submit" class="btn btn-primary mr-2" valye="Valider" />
        </div>

    {{ form_end(form) }}
{% endblock %}


{% block javascripts %}
  {{ parent() }}

  <script>
  (function() {
    document.getElementById("user_email").addEventListener("change", function (e) {
      const emailLocalPart = e.target.value;

      if (emailLocalPart) {
        const username = emailLocalPart.toLowerCase(),
              email = username + '{{ emailDomain }}';

        document.getElementById("user_username").value = username;
        document.getElementById("user_email").value = email;
      }
    });
  })();
  </script>

{% endblock %}
